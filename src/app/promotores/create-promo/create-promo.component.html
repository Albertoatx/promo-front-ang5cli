<h1>New Promotor</h1>
<!-- "ngSubmit" does a little bit more than "submit": cancels the default action of the form -->
<!--           so it isn't going to refresh our page when we submit the form -->
<form (ngSubmit)="savePromotor()" id="promotorForm" name="addPromotorForm" 
      #form="ngForm" 
      novalidate>

  <!-- {{diagnostic}} -->

  <!-- Is the form valid? {{ form.valid }} -->

  <!--
  <div class="form-group">
  
    [ngClass]="{'is-invalid':procode.invalid && procode.touched}"
   --> 
  <div class="form-group">     
    <label for="procod" class="control-label">Código Promotor</label>
    <div *ngIf="pantallaAddP">
       <input type="text" 
              [(ngModel)]="promotor.codigop" 
              class="form-control" 
              id="procod" 
              name="procode"
              #procode="ngModel" 
              required>  

        <span class="form-text" *ngIf="procode.invalid && procode.touched">
          Codigo promotor es obligatorio
        </span>  
        
      <!--  Valid:   {{ procode.valid }}  <br>
        Touched: {{ procode.touched }} <br>
      --> 
    </div>

  </div>
  
  <div class="form-group" [ngClass]="{'invalid': pronombre.invalid && pronombre.touched,
                                      'valid': pronombre.valid && pronombre.touched}">
    <label for="pronom" class="control-label">Nombre Promotor</label>
    <input type="text" 
           [(ngModel)]="promotor.nombrep" 
           class="form-control" 
           id="pronom" 
           name="pronombre"
           required
           #pronombre="ngModel">

      <span class="form-text" *ngIf="pronombre.invalid && pronombre.touched">
            Nombre del promotor es obligatorio
      </span>  
      <!--
      Valid:   {{ pronombre.valid }}  <br>
      Touched: {{ pronombre.touched }} <br>
      -->
  </div>
  
  <div class="form-group">
      <label for="procif" class="control-label">CIF Promotor</label>
      <input type="text" 
             [(ngModel)]="promotor.cifp" 
             class="form-control" 
             id="procif" 
             name="procifp"
             >
      
  </div>
 
  <div class="form-group">
      <label for="inmovil" class="control-label">Movil Promotor</label>
      <input class="form-control" 
             type="telephone"  
             [(ngModel)]="promotor.telefp"  
             name="protlfn"   
             placeholder="Introduzca un movil si lo desea (opcional)">
  </div>

  <div class="form-group">
      <label for="inemail" class="control-label">Email promotor</label>
      <input class="form-control" 
             type="email"  
             [(ngModel)]="promotor.emailp"
             name="promail"    
             >
  </div> 


  <fieldset ng-form="fAddress" name="prAddrForm"> 
      <legend>Direccion del promotor</legend>
  
        <div class="form-group row">
          <label for="incalle" class="col-sm-2 control-label">Calle</label>
          <div class="col-sm-9">
            <input class="form-control" 
                  type="text"  
                  name="procalle"   
                  [(ngModel)]="promotor.direcp.callep"   
                  placeholder="(opcional)">
          </div>
          <div class="col-sm-1"></div>
        </div>
    
        <div class="form-group row">
            <label for="inprov" class="col-sm-2 control-label">Provincia</label>
            <div class="col-sm-4">
              <input class="form-control" 
                     type="text"  
                     id="inprov"  
                     [(ngModel)]="promotor.direcp.provincia"
                     name="proprov" 
                     #proprov="ngModel"  
                     required>
            
                <span class="form-text" *ngIf="proprov.invalid && proprov.touched">
                      La provincia del promotor es obligatoria
                </span>  
            
            </div>
          </div>

        <div class="form-group row">
          <label for="inpueblo" class="col-sm-2 control-label">Localidad</label>
          <div class="col-sm-4">
            <input class="form-control" 
                  type="text"  
                  [(ngModel)]="promotor.direcp.pueblo"   
                  name="propueblo"   
                  >
            
          </div>
        </div>
  

        <div class="form-group row">
          <label for="incp" class="col-sm-2 control-label">Código postal</label>
          <div class="col-sm-4">
            <input class="form-control" 
                  type="text" 
                  [(ngModel)]="promotor.direcp.codpostal" 
                  name="procodpst"
                  min = 1000
                  max = 52999
                  minlength="5" maxlength="5"
                  placeholder="(opcional, 01000 a 52999)">
            
          </div>
        </div>
  
  </fieldset>
  
  <br>

  <div class="row">
    <div class="col-sm-11 text-center">
      <input type="submit" 
            class="btn btn-primary confirmButton" 
            value="Guardar" 
            [disabled]="form.invalid">
    </div>

    <div class="col-sm-1">
        <button type="button" 
                class="btn btn-success" 
                (click)="goBack()">Back
        </button>
    </div>
  </div>

  <!--
  <div class="obrasbuttons">
    <input type="submit" 
           class="btn btn-primary" 
           value="Guardar" 
           [disabled]="form.invalid">
    <button type="button" 
            class="btn btn-success" 
            (click)="goBack()">Back
    </button>
  </div>
  -->
 
	<strong id="error">{{errorMessage}}</strong>
</form>